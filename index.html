<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hadisy na dziś</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 800px;
    margin: 50px auto;
    line-height: 1.6;
    padding: 0 20px;
    background-color: #f9f9f9;
    color: #333;
  }
  #hadith {
    font-size: 1.3em;
    margin-bottom: 20px;
    font-style: italic;
  }
  #reference {
    text-align: right;
    font-weight: bold;
    color: #555;
  }
</style>
</head>
<body>

<div id="hadith">Ładowanie hadisu...</div>
<div id="reference"></div>

<!-- PapaParse do parsowania CSV -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
const csvUrl = "https://raw.githubusercontent.com/KolektywPolskichMuzulmanow/hadisy-na-dzien/refs/heads/main/Hadisy%20-%20Arkusz1.csv";

// Wczytanie i parsowanie CSV z GitHub
Papa.parse(csvUrl, {
    download: true,
    header: true, // zakładamy, że pierwszy wiersz to nagłówki: Treść, Źródło
    complete: function(results) {
        // Filtrujemy tylko pełne wiersze
        const data = results.data.filter(row => row.Treść && row.Źródło);

        // Wybieramy hadis na dzisiejszy dzień
        const today = new Date().getDate() % data.length; 
        const row = data[today];

        document.getElementById("hadith").textContent = '"' + row.Treść + '"';
        document.getElementById("reference").textContent = "— " + row.Źródło;
    },
    error: function(err) {
        console.error(err);
        document.getElementById("hadith").textContent = "Błąd wczytywania hadisu.";
        document.getElementById("reference").textContent = "";
    }
});
</script>

</body>
</html>
