<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Hadisy na dziś</title>
<style>
body { font-family: Arial; max-width: 800px; margin: 50px auto; line-height: 1.6; padding: 0 20px; background:#f9f9f9; color:#333;}
#hadith { font-style: italic; font-size: 1.3em; margin-bottom: 20px;}
#reference { text-align: right; font-weight: bold; color: #555;}
</style>
</head>
<body>

<div id="hadith">Ładowanie hadisu...</div>
<div id="reference"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
<script>
// RELATYWNY URL do CSV w tym samym folderze co index.html
const csvUrl = "Hadisy - Arkusz1.csv";

Papa.parse(csvUrl, {
    download: true,
    header: true,
    skipEmptyLines: true,
    complete: function(results) {
        console.log("CSV data:", results.data);

        // upewniamy się, że nagłówki CSV to dokładnie: hadith i reference
        let hadisyData = results.data.filter(row => 
            row.hadith && row.hadith.trim() !== "" &&
            row.reference && row.reference.trim() !== ""
        );

        console.log("Filtered hadisy:", hadisyData);

        if(hadisyData.length === 0){
            document.getElementById("hadith").textContent = "Brak danych w CSV.";
            document.getElementById("reference").textContent = "";
            return;
        }

        // wybieramy hadis na dzisiejszy dzień, powtarzamy od początku jeśli lista się skończy
        const today = new Date().getDate() % hadisyData.length;
        const row = hadisyData[today];

        document.getElementById("hadith").textContent = '"' + row.hadith.trim() + '"';
        document.getElementById("reference").textContent = "— " + row.reference.trim();
    },
    error: function(err) {
        console.error("Błąd wczytywania CSV:", err);
        document.getElementById("hadith").textContent = "Błąd wczytywania hadisu.";
        document.getElementById("reference").textContent = "";
    }
});
</script>

</body>
</html>
